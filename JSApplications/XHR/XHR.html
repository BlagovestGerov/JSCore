<!--
Your task is to write a JS function that loads a github repository asynchronously with AJAX. You should create an
instance of XmlHttpRequest an attach an onreadystatechange event to it. (An EventHandler that is called whenever
the readyState attribute changes). In your event handler when the readyState attribute reaches a value of 4 (it is
ready), replcae the text content of a div element with id &quot;res&quot; with the value of the responseText property of the
request. Do not format the response in any way. Submit your loadRepos function.
-->



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>XmlHttpRequest Example</title>
    <!-- <script src="scripts/1.xhr.js"></script> -->
</head>
<body>
<button onclick="loadRepos()">Load Repos</button>
<div id="res"></div>
<script>
    function loadRepos() {
        let req = new XMLHttpRequest();
        req.onreadystatechange = function () {
            console.log(`Current state: ` + req.readyState);
            //console.log(req.responseText);

            if(req.readyState === 4){
                document.getElementById("res").textContent = req.responseText;
            }
            /*if(req.readyState === 4){
                let repos = JSON.parse(req.responseText);
                let outputDiv = document.getElementById("res");
                outputDiv.textContent = '';

                for(let repo of repos){
                    outputDiv.textContent += `${JSON.stringify(repo)}`;
                }
            }*/

        };

        // false = synchromous
        req.open("GET", "https://api.github.com/users/testnakov/repos", true);
        req.send();
    }
</script>
</body>
</html>